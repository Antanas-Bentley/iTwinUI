import{r as e,q as K,w as T,x as W,y as q,v as A,d as L,z as B,A as H,C as O,m as D,P as U,B as j,c as J,D as Q,n as X,e as Y}from"./index-DCZUONDF.js";import{u as Z}from"./Popover-BLhm8qum.js";import{L as m}from"./ListItem-D-z2ub0H.js";const _=f=>e.createElement(K,{...f},e.createElement("path",{d:"M6.003 4.807v6.4a.28.28 0 0 0 .443.24L9.9 8.27a.34.34 0 0 0 0-.48L6.446 4.566a.269.269 0 0 0-.443.24z"})),$=e.forwardRef((f,N)=>{const{className:R,trigger:b,positionReference:r,portal:S=!0,popoverProps:c,children:g,...k}=f,n=T(),i=W(),u=q(),{interactions:v,visible:E,onVisibleChange:o,...M}=c??{},{listNavigation:d,hover:p,...P}=v??{},[C,l]=A(!1,E,o),[x,I]=e.useState(!1),s=Z({nodeId:i,visible:C,onVisibleChange:t=>t?l(!0):h(),interactions:{hover:n==null?p:{enabled:!!p&&!x,...p},listNavigation:d,...P},...M});e.useEffect(()=>{r!==void 0&&s.refs.setPositionReference(r)},[s.refs,r]);const F=L(N,s.refs.setFloating),a=e.useRef(null),h=e.useCallback(()=>{var t;l(!1),n==null&&((t=a.current)==null||t.focus({preventScroll:!0}))},[l,n]);B(e.useCallback(()=>{const t=y=>{(u===y.parentId&&i!==y.nodeId||u===y.nodeId)&&(l(!1),I(!1))};return n==null||n.events.on("onNodeFocused",t),()=>{n==null||n.events.off("onNodeFocused",t)}},[i,u,n==null?void 0:n.events,l]),()=>{},()=>{});const V=t=>s.getItemProps({...t,onFocus:D(t==null?void 0:t.onFocus,()=>{queueMicrotask(()=>{I(!0)}),n==null||n.events.emit("onNodeFocused",{nodeId:i,parentId:u})})}),G=H(b,t=>({...s.getReferenceProps({...t.props,"aria-expanded":s.open,ref:O(a,s.refs.setReference),onClick:D(t.props.onClick,()=>{s.interactionsEnabledStates.click&&C&&h()})})})),w=s.open&&e.createElement(U,{portal:S},e.createElement(j,{as:"div",className:J("iui-menu",R),ref:F,...s.getFloatingProps({role:"menu",...k})},g));return e.createElement(e.Fragment,null,e.createElement(z.Provider,{value:{popoverGetItemProps:V}},G,n!=null?e.createElement(Q,{id:i},w):w))}),z=e.createContext(void 0),ee=Y(),oe=e.forwardRef((f,N)=>{const{children:R,isSelected:b,disabled:r,value:S,onClick:c,sublabel:g,size:k=g?"large":"default",icon:n,startIcon:i=n,badge:u,endIcon:v=u,role:E="menuitem",subMenuItems:o=[],...M}=f;c!=null&&o.length>0&&ee("Passing a non-empty submenuItems array and onClick to MenuItem at the same time is not supported. This is because when a non empty submenuItems array is passed, clicking the MenuItem toggles the submenu visibility.");const d=e.useContext(z),p=e.useRef(null),P=X(),C=e.useMemo(()=>({placement:"right-start",interactions:{click:!0,hover:!0,listNavigation:{nested:o.length>0,openOnArrowKeyDown:!0}}}),[o.length]),l=a=>{if(!a.altKey)switch(a.key){case"Enter":case" ":case"Spacebar":{I(),a.preventDefault();break}}},x=a=>{var h;a.target===a.currentTarget&&((h=p.current)==null||h.focus())},I=()=>{c==null||c(S)},s=r?{}:{onClick:I,onKeyDown:l,onMouseEnter:x},F=e.createElement(m,{as:"div",actionable:!0,size:k,active:b,disabled:r,ref:L(p,N),role:E,tabIndex:r||E==="presentation"?void 0:-1,"aria-selected":b,"aria-haspopup":o.length>0?"true":void 0,"aria-controls":o.length>0?P:void 0,"aria-disabled":r,...(d==null?void 0:d.popoverGetItemProps)!=null?d.popoverGetItemProps(s):s,...M},i&&e.createElement(m.Icon,{as:"span","aria-hidden":!0},i),e.createElement(m.Content,null,e.createElement("div",null,R),g&&e.createElement(m.Description,null,g)),!v&&o.length>0&&e.createElement(m.Icon,{as:"span","aria-hidden":!0},e.createElement(_,null)),v&&e.createElement(m.Icon,{as:"span","aria-hidden":!0},v));return e.createElement(e.Fragment,null,o.length>0&&!r?e.createElement($,{id:P,trigger:F,popoverProps:C},o):F)});export{oe as M,$ as a};
