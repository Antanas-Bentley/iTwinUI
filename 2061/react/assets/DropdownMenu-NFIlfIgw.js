import{r as e,F as P,v as w,w as N,d as h,x as M,y,P as D,m as S,z as V}from"./index-BsM-neoq.js";import{a as k,b as K}from"./Menu-dmwNOltS.js";import{u as O}from"./Popover-54JxWjdK.js";const j=e.forwardRef((o,a)=>e.createElement(P,null,e.createElement(T,{ref:a,...o}))),T=e.forwardRef((o,a)=>{const{menuItems:r,children:d,role:m="menu",visible:p,placement:g="bottom-start",matchWidth:v=!1,onVisibleChange:R,portal:b=!0,...E}=o,[F,l]=w(!1,p,R),u=e.useRef(null),s=e.useCallback(()=>{var t;l(!1),(t=u.current)==null||t.focus({preventScroll:!0})},[l]),x=e.useMemo(()=>typeof r=="function"?r(s):r,[r,s]),[C,c]=e.useState(null),i=e.useRef([]),f=N(),n=O({nodeId:f,visible:F,onVisibleChange:t=>t?l(!0):s(),placement:g,matchWidth:v,interactions:{listNavigation:{activeIndex:C,onNavigate:c,listRef:i,focusItemOnOpen:!0}}}),I=h(a,n.refs.setFloating);return e.createElement(e.Fragment,null,M(d,t=>({...n.getReferenceProps(t.props),"aria-expanded":n.open,ref:V(u,n.refs.setReference)})),e.createElement(y,{id:f},n.open&&e.createElement(D,{portal:b},e.createElement(k.Provider,{value:{setCurrentFocusedNodeIndex:c,focusableNodes:i}},e.createElement(K,{setFocus:!1,...n.getFloatingProps({role:m,...E,onKeyDown:S(o.onKeyDown,t=>{t.defaultPrevented||t.key==="Tab"&&s()})}),ref:I},x)))))});export{j as D};
