// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../utils/index';

@mixin iui-progress-linear-wrapper {
  display: flex;
  flex-direction: column;
  gap: var(--iui-size-xs);
}

@mixin iui-progress-linear($height: var(--iui-size-2xs)) {
  --_iui-progress-bar-background-color: var(--iui-color-background-5);
  --_iui-progress-value-background-color: var(--iui-color-foreground-primary);

  appearance: none;
  width: 100%;
  height: $height;
  position: relative;
  overflow: hidden;

  &::-webkit-progress-bar {
    background-color: var(--_iui-progress-bar-background-color);
  }

  &::-webkit-progress-value {
    background-color: var(--_iui-progress-value-background-color);
  }
}

/// @arg $state Can be one of: success, error
@mixin iui-progress-linear-status($state) {
  @if $state == 'success' {
    --_iui-progress-value-background-color: var(--iui-color-foreground-positive);

    ~ .iui-progress-linear-label {
      --_iui-progress-label-color: var(--iui-color-foreground-positive);
      @include iui-text-selection(positive);
    }
  }
  @if $state == 'error' {
    --_iui-progress-value-background-color: var(--iui-color-foreground-negative);

    ~ .iui-progress-linear-label {
      --_iui-progress-label-color: var(--iui-color-foreground-negative);
      @include iui-text-selection(negative);
    }
  }
}

@mixin iui-progress-linear-label {
  align-items: center;
  display: flex;
  font-size: var(--iui-font-size-0);
  justify-content: space-between;
  color: var(--_iui-progress-label-color);

  > :only-child {
    margin: 0 auto;
    text-align: center;
  }

  > :last-child:not(:first-child) {
    user-select: none;
  }
}

@mixin iui-progress-linear-label-icon {
  @include iui-icon-style;
  fill: currentColor;
}

@mixin iui-progress-linear-determinate($speed: 2s) {
  transition: width $speed ease-in-out;
}

/// @arg $state Can be one of: in-progress, error
@mixin iui-progress-linear-indeterminate($state) {
  content: '';
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  background-color: var(--_iui-progress-value-background-color);

  @if $state == 'in-progress' {
    @keyframes iui-progress-linear-animate-indeterminate {
      0% {
        transform: translateX(-60%) scaleX(0);
      }

      40% {
        transform: translateX(-40%) scaleX(0.4);
      }

      100% {
        transform: translateX(100%) scaleX(0.5);
      }
    }
    animation: iui-progress-linear-animate-indeterminate 1.5s infinite linear;
  }
}
