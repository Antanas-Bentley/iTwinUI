import{r as u,B as L,c as q}from"./index-DfTeYc2P.js";const P=(r,s,o)=>{const d=o?E(r.getHours(),o):r.getHours();return o?!!s&&d%12===s.getHours()%12:!!s&&d===s.getHours()},N=(r,s)=>!!s&&r.getMinutes()===s.getMinutes(),x=(r,s)=>!!s&&r.getSeconds()===s.getSeconds(),U=(r,s,o,d)=>{let n=!0;switch(o){case"seconds":if(n=x(r,s),!n)break;case"minutes":if(n=N(r,s),!n)break;case"hours":n=P(r,s,d)}return n},$=(r,s)=>!!s&&(r==="AM"?s.getHours()<12:s.getHours()>=12),E=(r,s)=>{const o=r%12;return s==="PM"?o+12:o},h=(r,s)=>new Date(s.getFullYear(),s.getMonth(),s.getDate(),r,s.getMinutes(),s.getSeconds()),te=(r,s)=>{let o="";switch(s){case"seconds":o=":"+r.getSeconds().toLocaleString(void 0,{minimumIntegerDigits:2});case"minutes":o=":"+r.getMinutes().toLocaleString(void 0,{minimumIntegerDigits:2})+o;case"hours":o=r.getHours().toLocaleString(void 0,{minimumIntegerDigits:2})+o}return o},ne=u.forwardRef((r,s)=>{const{date:o,onChange:d,use12Hours:n=!1,precision:i="minutes",hourStep:F=1,minuteStep:w=1,secondStep:p=1,setFocusHour:R=!1,hourRenderer:k=e=>e.getHours().toLocaleString(void 0,{minimumIntegerDigits:2}),minuteRenderer:j=e=>e.getMinutes().toLocaleString(void 0,{minimumIntegerDigits:2}),secondRenderer:g=e=>e.getSeconds().toLocaleString(void 0,{minimumIntegerDigits:2}),meridiemRenderer:C=e=>e,useCombinedRenderer:H=!1,combinedRenderer:S=te,className:l,...z}=r,[c,K]=u.useState(o),[f,M]=u.useState(c??new Date),[D,Y]=u.useState(n?(f==null?void 0:f.getHours())>11?"PM":"AM":void 0);u.useEffect(()=>{M(o??new Date),K(o)},[o]);const G=e=>{const t=n?E(e.getHours(),D):e.getHours(),a=h(t,c??new Date);T(a)},J=e=>{const t=n?E(e.getHours(),D):e.getHours(),a=h(t,e);T(a)},O=e=>{let t=c??new Date;const a=t.getHours();Y(e),e==="AM"&&a>11&&(t=h(a-12,t)),e==="PM"&&a<=12&&(t=h(a+12,t)),T(t)},T=e=>{let t=e;i==="hours"&&(t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),0,0)),i==="minutes"&&(t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0)),M(t),K(t),d==null||d(t)},Q=e=>{const t=n?E(e.getHours(),D):e.getHours();M(h(t,f))},W=e=>{const t=n?E(e.getHours(),D):e.getHours();M(h(t,e))},X=e=>{let t=c??new Date;const a=t.getHours();e==="AM"&&a>11&&(Y(e),t=h(a-12,t)),e==="PM"&&a<=12&&(Y(e),t=h(a+12,t)),M(t)},I=(e,t,a)=>{const b=[];for(let y=0;y<e;y++)y%a===0&&b.push(t(y));return b},Z=u.useMemo(()=>{const e=c??new Date,t=[],a=Array.from(Array(n?12:24).keys()).filter(m=>m%F===0).map(m=>n&&m===0?12:m),b=Array.from(Array(60).keys()).filter(m=>m%w===0),y=Array.from(Array(60).keys()).filter(m=>m%p===0);return a.forEach(m=>{i==="hours"?t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate(),m,e.getMinutes(),e.getSeconds())):b.forEach(B=>{i==="minutes"?t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate(),m,B,e.getSeconds())):y.forEach(ee=>{t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate(),m,B,ee))})})}),t},[F,w,p,c,n,i]),_=u.useMemo(()=>{const e=c??new Date;return I(n?12:24,t=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),n&&t===0?12:t,e.getMinutes(),e.getSeconds()),F)},[F,c,n]),v=u.useMemo(()=>{const e=c??new Date;return I(60,t=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),t,e.getSeconds()),w)},[w,c]),V=u.useMemo(()=>{const e=c??new Date;return I(60,t=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),t),p)},[p,c]);return u.createElement(L,{className:q("iui-time-picker",l),ref:s,...z},H?u.createElement(A,{data:Z,isSameFocused:e=>U(e,f,i,n?D:void 0),isSameSelected:e=>U(e,c,i,n?D:void 0),onFocusChange:W,onSelectChange:J,setFocus:R,precision:i,valueRenderer:S}):u.createElement(u.Fragment,null,u.createElement(A,{data:_,isSameFocused:e=>P(e,f,n?D:void 0),isSameSelected:e=>P(e,c,n?D:void 0),onFocusChange:Q,onSelectChange:G,setFocus:R,valueRenderer:k}),i!=="hours"&&u.createElement(A,{data:v,isSameFocused:e=>N(e,f),isSameSelected:e=>N(e,c),onFocusChange:e=>M(e),onSelectChange:e=>T(e),valueRenderer:j}),i==="seconds"&&u.createElement(A,{data:V,isSameFocused:e=>x(e,f),isSameSelected:e=>x(e,c),onFocusChange:e=>M(e),onSelectChange:e=>T(e),valueRenderer:g})),n&&u.createElement(A,{data:["AM","PM"],isSameFocused:e=>$(e,f),isSameSelected:e=>$(e,c),onFocusChange:e=>X(e),onSelectChange:e=>O(e),valueRenderer:C,className:"iui-period"}))}),A=r=>{const{data:s,onFocusChange:o,onSelectChange:d,isSameFocused:n,isSameSelected:i,setFocus:F=!1,valueRenderer:w,precision:p="minutes",className:R="iui-time"}=r,k=u.useRef(F),j=(g,C,H,S,l)=>{if(!g.altKey)switch(g.key){case"ArrowDown":if(l+1>C)break;H(l+1),k.current=!0,g.preventDefault();break;case"ArrowUp":if(l-1<0)break;H(l-1),k.current=!0,g.preventDefault();break;case"Enter":case" ":case"Spacebar":S(l),g.preventDefault();break}};return u.createElement(L,{className:`${R}`},u.createElement("ol",null,s.map((g,C)=>{const H=n(g);return u.createElement(L,{as:"li",onKeyDown:S=>{j(S,s.length-1,l=>o(s[l]),l=>d(s[l]),C)},className:q({"iui-selected":i(g)}),key:C,tabIndex:H?0:void 0,ref:S=>{!S||!H||setTimeout(()=>{S.scrollIntoView({block:"nearest",inline:"nearest"}),k.current&&(S.focus(),k.current=!1)})},onClick:()=>{d(g)}},w(g,p))})))};export{ne as T};
