import{r as e,d as F,n as C,g as w,x as k,E as I,G as M,B as S,c as N,H as O,J as W,K as z,A as B,v as L,L as T,M as $,N as U,O as A,Q as D,U as H,W as V,X as G,Y as J,Z as K,_ as Q,$ as X,a0 as Y,a1 as Z,a2 as _,a3 as j,a4 as q}from"./index-zHmCT5U4.js";const ee=l=>{const{placement:d="bottom-start",visible:f,onVisibleChange:b,closeOnOutsideClick:h,autoUpdateOptions:p,matchWidth:r,interactions:v,role:m,...E}=l,s={click:!0,dismiss:!0,hover:!1,focus:!1,listNavigation:void 0,...v},x=B(),o=e.useMemo(()=>({flip:!0,shift:!0,...l.middleware}),[l.middleware]),[i,t]=L(!1,f,b),a=T({placement:d,open:i,onOpenChange:t,whileElementsMounted:e.useMemo(()=>i?(...n)=>$(...n,p):void 0,[p,i]),...E,middleware:e.useMemo(()=>[o.offset!==void 0&&U(o.offset),o.flip&&A(),o.shift&&D(),r&&H({apply:({rects:n})=>{P(n.reference.width)}}),o.autoPlacement&&V(),o.inline&&G(),o.hide&&J()].filter(Boolean),[r,o])}),c=K([Q(a.context,{enabled:!!s.click,...s.click}),X(a.context,{enabled:!!s.dismiss,outsidePress:h,bubbles:x!=null,...s.dismiss}),Y(a.context,{enabled:!!s.hover,delay:100,handleClose:Z({buffer:1,blockPointerEvents:!0}),move:!1,...s.hover}),_(a.context,{enabled:!!s.focus,...s.focus}),j(a.context,{role:"dialog",enabled:!!m}),q(a.context,{enabled:!!s.listNavigation,...s.listNavigation})]),[u,P]=e.useState(),g=e.useCallback(n=>c.getFloatingProps({...n,style:{...a.floatingStyles,zIndex:9999,...r&&u?{minInlineSize:`${u}px`,maxInlineSize:`min(${u*2}px, 90vw)`}:{},...n==null?void 0:n.style}}),[a.floatingStyles,c,r,u]);return e.useMemo(()=>({open:i,onOpenChange:t,...c,getFloatingProps:g,...a}),[i,t,c,g,a])},ae=e.forwardRef((l,d)=>{var n;const{portal:f=!0,visible:b,placement:h="bottom-start",onVisibleChange:p,closeOnOutsideClick:r=!0,middleware:v,positionReference:m,className:E,children:s,content:x,applyBackground:o=!1,...i}=l,t=ee({visible:b,placement:h,onVisibleChange:p,closeOnOutsideClick:r,role:"dialog",middleware:v}),[a,c]=e.useState(),u=F(t.refs.setFloating,d,c),P=`${C()}-trigger`,g=!!l["aria-labelledby"]||!!l["aria-label"];return w(()=>{if(m)return t.refs.setPositionReference(m),()=>void t.refs.setPositionReference(null)},[t.refs,m]),e.createElement(e.Fragment,null,k(s,y=>({id:y.props.id||P,...t.getReferenceProps(y.props),ref:t.refs.setReference})),t.open?e.createElement(te,{portal:f},e.createElement(I,{portalContainer:a},e.createElement(R,null),e.createElement(M,{context:t.context,modal:!1,initialFocus:t.refs.floating},e.createElement(S,{className:N({"iui-popover-surface":o},E),"aria-labelledby":g||(n=t.refs.domReference.current)==null?void 0:n.id,...t.getFloatingProps(i),ref:u},x)))):null)}),te=({children:l,portal:d=!0})=>{const f=O(d);return e.createElement(W,{root:f},e.createElement(R,null),l)},R=e.memo(()=>e.createElement(z,{css:`
        :host {
          display: contents;
        }
      `},e.createElement("slot",null)));export{ae as P,ee as u};
